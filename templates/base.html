<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>{{ title or 'RADIO VALENCIA' }} - Новости Валенсии</title>
    
    <meta name="description" content="{{ description or 'RADIO VALENCIA - свежие новости Валенсии: история, финансы, спорт, контакты' }}">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="{{ request.url }}">
    
    <meta property="og:title" content="{{ og_title or 'RADIO VALENCIA' }}">
    <meta property="og:description" content="{{ og_description or 'Свежие новости из Валенсии' }}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:image" content="https://radio-valencia.onrender.com/static/fav.png">
    <meta property="og:site_name" content="RADIO VALENCIA">
    <meta property="og:locale" content="ru_RU">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ og_title or 'RADIO VALENCIA' }}">
    <meta name="twitter:description" content="{{ og_description or 'Свежие новости из Валенсии' }}">
    <meta name="twitter:image" content="https://radio-valencia.onrender.com/static/fav.png">
    
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='fav.png', v=1) }}">
    
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        .header-gradient {
            background-image: linear-gradient(to right, #ef4444, #f97316);
            height: 4px;
        }
    </style>

    {% block structured_data %}{% endblock %}
</head>

<body class="bg-gray-50 font-sans">

<header class="bg-white shadow-md sticky top-0 z-50">
    <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
        <div class="flex justify-between items-center relative">

            <h1 class="text-2xl sm:text-3xl font-bold">
                <a href="{{ url_for('home') }}" class="text-red-600 hover:text-red-800 transition">
                    RADIO VALENCIA
                </a>
            </h1>

            <!-- DESKTOP MENU -->
            <nav class="hidden md:flex space-x-6 text-sm font-medium">
                <a href="{{ url_for('home') }}" class="{% if current_section == 'home' %}text-red-600 font-bold{% else %}text-gray-700 hover:text-red-600{% endif %}">Главная</a>
                <a href="{{ url_for('history') }}" class="{% if current_section == 'history' %}text-red-600 font-bold{% else %}text-gray-700 hover:text-red-600{% endif %}">История</a>
                <a href="{{ url_for('finance') }}" class="{% if current_section == 'finance' %}text-red-600 font-bold{% else %}text-gray-700 hover:text-red-600{% endif %}">Финансы</a>
                <a href="{{ url_for('sport') }}" class="{% if current_section == 'sport' %}text-red-600 font-bold{% else %}text-gray-700 hover:text-red-600{% endif %}">Спорт</a>
                <a href="{{ url_for('contacts') }}" class="{% if current_section == 'contacts' %}text-red-600 font-bold{% else %}text-gray-700 hover:text-red-600{% endif %}">Контакты</a>

                {% if session.get('logged_in') %}
                    <a href="/admin" class="text-red-600 font-semibold">Админка</a>
                    <a href="{{ url_for('logout') }}" class="text-gray-500 hover:text-gray-900">Выход</a>
                {% endif %}
            </nav>

            <!-- MOBILE BUTTON -->
            <button id="mobile-menu-button" class="md:hidden text-gray-700">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path id="burger-icon" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M4 6h16M4 12h16M4 18h16"/>
                    <path id="close-icon" class="hidden" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>

        <!-- MOBILE MENU -->
        <div id="mobile-dropdown"
             class="md:hidden absolute top-full left-0 right-0 bg-white shadow-lg border-t overflow-hidden max-h-0 transition-all duration-300">
            <nav class="flex flex-col py-2">
                <a href="{{ url_for('home') }}" class="px-6 py-3">Главная</a>
                <a href="{{ url_for('history') }}" class="px-6 py-3">История</a>
                <a href="{{ url_for('finance') }}" class="px-6 py-3">Финансы</a>
                <a href="{{ url_for('sport') }}" class="px-6 py-3">Спорт</a>
                <a href="{{ url_for('contacts') }}" class="px-6 py-3">Контакты</a>

                {% if session.get('logged_in') %}
                    <a href="/admin" class="px-6 py-3 text-red-600 font-semibold">Админка</a>
                    <a href="{{ url_for('logout') }}" class="px-6 py-3 text-gray-600">Выход</a>
                {% endif %}
            </nav>
        </div>
    </div>

    <div class="header-gradient"></div>
</header>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const btn = document.getElementById('mobile-menu-button');
    const menu = document.getElementById('mobile-dropdown');
    const burger = document.getElementById('burger-icon');
    const close = document.getElementById('close-icon');

    btn.addEventListener('click', () => {
        menu.classList.toggle('max-h-0');
        menu.classList.toggle('max-h-96');
        burger.classList.toggle('hidden');
        close.classList.toggle('hidden');
    });
});
</script>

<main class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
    {% block content %}{% endblock %}
</main>

<footer class="bg-white border-t mt-12">
    <div class="max-w-screen-xl mx-auto px-4 py-6 text-center text-sm text-gray-500">
        &copy; {{ datetime.now().year }} RADIO VALENCIA. Все права защищены.
    </div>
</footer>

</body>
</html>
