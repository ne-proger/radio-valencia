{% extends "base.html" %}

{% block title %}Создать новость — RADIO VALENCIA{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto bg-white p-8 rounded-xl shadow-xl">
    <h1 class="text-3xl font-bold text-gray-900 mb-8 text-center">Создать новую новость</h1>
    
    <form method="POST" class="space-y-6">
        <div>
            <label for="title" class="block text-lg font-medium text-gray-700 mb-2">Заголовок</label>
            <input type="text" id="title" name="title" required 
                   class="w-full px-5 py-4 border border-gray-300 rounded-xl focus:ring-4 focus:ring-red-200 focus:border-red-500 transition text-lg">
        </div>

        <div>
            <label for="category" class="block text-lg font-medium text-gray-700 mb-2">Категория</label>
            <select id="category" name="category" 
                    class="w-full px-5 py-4 border border-gray-300 rounded-xl focus:ring-4 focus:ring-red-200 focus:border-red-500 transition text-lg">
                <option value="news">Новости</option>
                <option value="history">История</option>
                <option value="finance">Финансы</option>
                <option value="sport">Спорт</option>
            </select>
        </div>

        <div class="flex items-center">
            <input type="checkbox" id="is_pinned" name="is_pinned" class="h-5 w-5 text-red-600 focus:ring-red-500 border-gray-300 rounded">
            <label for="is_pinned" class="ml-3 text-lg font-medium text-gray-700">Закрепить новость на главной</label>
        </div>

        <div>
            <label for="image_urls" class="block text-lg font-medium text-gray-700 mb-2">Ссылки на изображения (по одной на строку)</label>
            <textarea id="image_urls" name="image_urls" rows="5" 
                      class="w-full px-5 py-4 border border-gray-300 rounded-xl focus:ring-4 focus:ring-red-200 focus:border-red-500 transition text-lg font-mono"></textarea>
            <p class="text-sm text-gray-500 mt-2">Первая ссылка — главная. Можно вставлять любые прямые URL.</p>
        </div>

        <div>
            <label for="content" class="block text-lg font-medium text-gray-700 mb-2">Текст новости (Markdown)</label>
            <textarea id="content" name="content" required rows="20" 
                      class="w-full border border-gray-300 rounded-xl focus:ring-4 focus:ring-red-200 focus:border-red-500 transition text-lg"></textarea>
        </div>

        <div class="text-center pt-6">
            <button type="submit" 
                    class="bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white font-bold py-4 px-16 rounded-full text-xl shadow-xl transition transform hover:scale-105">
                Опубликовать новость
            </button>
        </div>
    </form>
</div>

<!-- EasyMDE — улучшенный редактор -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/easymde@2.18.0/dist/easymde.min.css">
<script src="https://cdn.jsdelivr.net/npm/easymde@2.18.0/dist/easymde.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const textarea = document.getElementById('content');
    if (textarea) {
        new EasyMDE({
            element: textarea,
            spellChecker: false,
            autosave: {
                enabled: true,
                uniqueId: "create-post-" + Date.now(), // уникально для сессии
                delay: 1000,
            },
            forceSync: true,
            placeholder: "Начните писать здесь… Markdown поддерживается (заголовки #, **жирный**, *курсив*, списки, ссылки, код ```, таблицы и т.д.)",
            toolbarTips: true,
            status: ["lines", "words", "cursor"],
            minHeight: "550px",
            previewStyle: "side-by-side",
            renderingConfig: {
                codeSyntaxHighlighting: true
            },
            toolbar: [
                "bold", "italic", "heading", "strikethrough", "|",
                "quote", "unordered-list", "ordered-list", "code", "table", "|",
                "link", "image", "|",
                "preview", "side-by-side", "fullscreen", "|",
                "guide", "clean-block"
            ]
        });
    }
});
</script>
{% endblock %}